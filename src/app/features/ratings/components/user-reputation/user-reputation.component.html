<div class="reputation-card">
  <div class="reputation-header">
    <div class="score-section">
      <span class="score">{{ averageRating.toFixed(1) }}</span>
      <span class="max-score">/5.0</span>
    </div>
    <span *ngIf="isTopRated" class="top-rated-badge">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="14"
        height="14"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <circle cx="12" cy="8" r="6" />
        <path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11" />
      </svg>
      Top Rated
    </span>
  </div>

  <div class="stars-row">
    <app-star-rating
      [value]="averageRating"
      [readonly]="true"
      size="md"
    ></app-star-rating>
  </div>

  <p class="total-reviews">
    {{ totalRatings }} {{ totalRatings <= 1 ? 'evaluation' : 'evaluations' }}
  </p>

  <div *ngIf="showDistribution && totalRatings > 0" class="distribution">
    <div *ngFor="let item of distributionBars" class="bar-row">
      <span class="star-num">{{ item.star }}</span>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="12"
        height="12"
        viewBox="0 0 24 24"
        fill="#f59e0b"
        stroke="#f59e0b"
        stroke-width="2"
      >
        <polygon
          points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
        />
      </svg>
      <div class="bar-bg">
        <div class="bar-fill" [style.width.%]="item.percentage"></div>
      </div>
      <span class="count">{{ item.count }}</span>
    </div>
  </div>
</div>